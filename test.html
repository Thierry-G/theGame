<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Canvas</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
            margin: auto;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <canvas id="myCanvas"></canvas>
    <script>
        const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');
        let squareId = 0; // global counter for square IDs
        let squares = [];
        let selectedSquare = null;
        let animationId = null;
        let spaceBetweenSquares; // configurable space between squares
        let squareSize; // size of the squares
        let allSquaresDisplayed = false;

        // Define the matrix
        let matrix = {
            cols: 4,
            rows: 4
        };

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const minDimension = Math.min(canvas.width, canvas.height);
            squareSize = Math.round(minDimension / (matrix.cols + 1));
            spaceBetweenSquares = (minDimension - squareSize * matrix.cols) / (matrix.cols + 1);
            drawSquares();
        }

        function drawSquare(x, y, size, color, borderColor, id) {
            ctx.fillStyle = color;
            ctx.fillRect(x, y, size, size);
            ctx.strokeStyle = borderColor;
            ctx.strokeRect(x, y, size, size);

            // Draw square ID
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.font = '16px Arial';
            ctx.fillText(id, x + size / 2, y + size / 2);
        }

        function drawSquares() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            squares.forEach(square => {
                if (square.value === 1) {
                    let size = square === selectedSquare ? squareSize * 1.2 : squareSize; // make the selected square larger
                    drawSquare(square.x, square.y, size, square.color, square.borderColor, square.id);
                }
            });
        }

        function addSquare() {
            if (squares.length >= matrix.cols * matrix.rows) {
                allSquaresDisplayed = true;
                return;
            }

            let row = Math.floor(squares.length / matrix.cols); // calculate the row for the new square
            let col = squares.length % matrix.cols; // calculate the column for the new square
            let x = col * (squareSize + spaceBetweenSquares) + spaceBetweenSquares; // adjust x coordinate based on the column
            let y = row * (squareSize + spaceBetweenSquares) + spaceBetweenSquares; // adjust y coordinate based on row

            let newSquare = { id: squareId++, row, col, x, y, color: 'blue', borderColor: 'black', value: 1 };

            squares.push(newSquare); // add the new square at the end of the array

            drawSquares();
        }

        setInterval(() => {
            if (!allSquaresDisplayed) {
                addSquare(); // add a new square when there are no squares or the last square has enough space to the right
            }
        }, 1000);

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas(); // initial canvas setup
    </script>
</body>

</html>